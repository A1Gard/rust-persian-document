## بسته‌ها و جعبه‌ها

اولین بخش‌های سیستم ماژول که پوشش خواهیم داد، **بسته‌ها (packages)** و **جعبه‌ها (crates)** هستند.

### جعبه (Crate)

یک **جعبه** کوچک‌ترین مقدار کدی است که کامپایلر Rust در یک زمان در نظر می‌گیرد. حتی اگر به‌جای `cargo` از `rustc` استفاده کنید و یک فایل کد منبع تکی را پاس دهید (همان‌طور که در بخش «نوشتن و اجرای یک برنامه Rust» در فصل اول انجام دادیم)، کامپایلر آن فایل را یک جعبه در نظر می‌گیرد. جعبه‌ها می‌توانند شامل ماژول‌ها باشند، و ماژول‌ها ممکن است در فایل‌های دیگری تعریف شوند که با جعبه کامپایل می‌شوند، همان‌طور که در بخش‌های بعدی خواهیم دید.

یک جعبه می‌تواند به یکی از دو شکل باشد: **جعبه باینری (binary crate)** یا **جعبه کتابخانه‌ای (library crate)**.

- **جعبه‌های باینری** برنامه‌هایی هستند که می‌توانید به یک فایل اجرایی کامپایل کنید که می‌توانید آن را اجرا کنید، مانند یک برنامه خط فرمان یا یک سرور. هر کدام باید یک تابع به نام `main` داشته باشند که تعریف می‌کند وقتی فایل اجرایی اجرا می‌شود چه اتفاقی می‌افتد. تمام جعبه‌هایی که تاکنون ایجاد کرده‌ایم، جعبه‌های باینری بوده‌اند.
- **جعبه‌های کتابخانه‌ای** تابع `main` ندارند و به یک فایل اجرایی کامپایل نمی‌شوند. در عوض، آن‌ها قابلیت‌هایی را تعریف می‌کنند که برای به اشتراک‌گذاری با چندین پروژه در نظر گرفته شده‌اند. برای مثال، جعبه `rand` که در فصل دوم استفاده کردیم، قابلیت تولید اعداد تصادفی را فراهم می‌کند. بیشتر اوقات وقتی Rustaceanها می‌گویند «جعبه»، منظورشان جعبه کتابخانه‌ای است، و از «جعبه» به‌صورت قابل‌تعویض با مفهوم کلی برنامه‌نویسی «کتابخانه» استفاده می‌کنند.

**ریشه جعبه (crate root)** یک فایل منبع است که کامپایلر Rust از آن شروع می‌کند و ماژول ریشه جعبه شما را تشکیل می‌دهد (ماژول‌ها را در بخش «تعریف ماژول‌ها برای کنترل حوزه و حریم خصوصی» با جزئیات توضیح خواهیم داد).

### بسته (Package)

یک **بسته** مجموعه‌ای از یک یا چند جعبه است که مجموعه‌ای از قابلیت‌ها را فراهم می‌کند. یک بسته شامل یک فایل `Cargo.toml` است که شرح می‌دهد چگونه این جعبه‌ها ساخته شوند. خود **Cargo** در واقع یک بسته است که شامل جعبه باینری برای ابزار خط فرمانی است که شما برای ساخت کد خود استفاده کرده‌اید. بسته Cargo همچنین شامل یک جعبه کتابخانه‌ای است که جعبه باینری به آن وابسته است. پروژه‌های دیگر می‌توانند به جعبه کتابخانه‌ای Cargo وابسته باشند تا از همان منطقی که ابزار خط فرمان Cargo استفاده می‌کند، استفاده کنند.

یک بسته می‌تواند هر تعداد جعبه باینری که بخواهید داشته باشد، اما حداکثر فقط یک جعبه کتابخانه‌ای. یک بسته باید حداقل یک جعبه داشته باشد، چه کتابخانه‌ای باشد چه باینری.

### ایجاد یک بسته

بیایید ببینیم وقتی یک بسته ایجاد می‌کنیم چه اتفاقی می‌افتد. ابتدا دستور `cargo new my-project` را وارد می‌کنیم:

```bash
$ cargo new my-project
     Created binary (application) `my-project` package
$ ls my-project
Cargo.toml
src
$ ls my-project/src
main.rs
```

پس از اجرای `cargo new my-project`، از `ls` استفاده می‌کنیم تا ببینیم Cargo چه چیزی ایجاد کرده است. در دایرکتوری پروژه، یک فایل `Cargo.toml` وجود دارد که نشان‌دهنده یک بسته است. همچنین یک دایرکتوری `src` وجود دارد که شامل `main.rs` است. فایل `Cargo.toml` را در ویرایشگر متن خود باز کنید و توجه کنید که هیچ اشاره‌ای به `src/main.rs` وجود ندارد. Cargo از یک قرارداد پیروی می‌کند که `src/main.rs` ریشه جعبه یک جعبه باینری با همان نام بسته است. به همین ترتیب، Cargo می‌داند که اگر دایرکتوری بسته شامل `src/lib.rs` باشد، بسته شامل یک جعبه کتابخانه‌ای با همان نام بسته است، و `src/lib.rs` ریشه جعبه آن است. Cargo فایل‌های ریشه جعبه را به `rustc` پاس می‌دهد تا کتابخانه یا باینری را بسازد.

در اینجا، ما یک بسته داریم که فقط شامل `src/main.rs` است، به این معنی که فقط یک جعبه باینری به نام `my-project` دارد. اگر یک بسته شامل `src/main.rs` و `src/lib.rs` باشد، دو جعبه دارد: یک باینری و یک کتابخانه، هر دو با همان نام بسته. یک بسته می‌تواند چندین جعبه باینری داشته باشد با قرار دادن فایل‌ها در دایرکتوری `src/bin`: هر فایل یک جعبه باینری جداگانه خواهد بود.
