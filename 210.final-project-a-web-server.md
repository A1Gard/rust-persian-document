# پروژه نهایی: ساخت یک سرور وب چند ریسمانی

این یک سفر طولانی بوده است، اما به پایان کتاب رسیدیم. در این فصل، ما یک پروژه دیگر را با هم انجام خواهیم داد تا برخی از مفاهیم را که در فصل‌های پایانی پوشش دادیم، نشان دهیم و همچنین برخی از درس‌های قبلی را مرور کنیم.

برای پروژه نهایی‌مان، یک سرور وب خواهیم ساخت که در آن عبارت "hello" را نمایش می‌دهد و در مرورگر وب شبیه به شکل ۲۱-۱ خواهد بود.

<img src="img/trpl21-01.png">

**شکل ۲۱-۱: پروژه نهایی مشترک ما**

برنامه ما برای ساخت سرور وب به این صورت است:

1. کمی درباره TCP و HTTP یاد بگیریم.
2. به TCP connections در یک socket گوش دهیم.
3. تعداد کمی از درخواست‌های HTTP را تجزیه کنیم.
4. یک پاسخ HTTP مناسب ایجاد کنیم.
5. از طریق یک thread pool، توان عملیاتی سرور خود را بهبود بخشیم.

قبل از اینکه شروع کنیم، باید به دو جزئیات اشاره کنیم. اول، روشی که ما استفاده خواهیم کرد بهترین راه برای ساخت یک سرور وب با Rust نخواهد بود. اعضای جامعه تعدادی crate آماده برای تولید را در crates.io منتشر کرده‌اند که پیاده‌سازی‌های کامل‌تری از سرور وب و thread pool را نسبت به آنچه ما خواهیم ساخت، ارائه می‌دهند. با این حال، هدف ما در این فصل کمک به شما در یادگیری است، نه انتخاب راه آسان. از آنجایی که Rust یک زبان برنامه‌نویسی سیستم است، می‌توانیم سطح انتزاعی که می‌خواهیم با آن کار کنیم را انتخاب کنیم و می‌توانیم به سطح پایین‌تری نسبت به آنچه در زبان‌های دیگر ممکن یا عملی است، برویم.

دوم، ما در اینجا از async و await استفاده نخواهیم کرد. ساخت یک thread pool به اندازه کافی چالش‌برانگیز است، بدون اینکه ساخت یک runtime async را نیز اضافه کنیم! با این حال، ما اشاره خواهیم کرد که چگونه async و await ممکن است به برخی از مشکلات مشابهی که در این فصل خواهیم دید، قابل اعمال باشند. در نهایت، همانطور که در فصل ۱۷ اشاره کردیم، بسیاری از runtimes async از thread pool برای مدیریت کارهای خود استفاده می‌کنند.

بنابراین، ما سرور HTTP پایه و thread pool را به صورت دستی خواهیم نوشت تا شما بتوانید ایده‌ها و تکنیک‌های کلی پشت crateهایی که ممکن است در آینده استفاده کنید را یاد بگیرید.