## مقدمه

**توجه:** این نسخه از کتاب مشابه کتاب «The Rust Programming Language» است که به‌صورت چاپی و الکترونیکی توسط انتشارات No Starch Press منتشر شده است.

به کتاب «The Rust Programming Language» خوش آمدید، کتابی مقدماتی درباره Rust. زبان برنامه‌نویسی Rust به شما کمک می‌کند نرم‌افزارهایی سریع‌تر و قابل‌اعتمادتر بنویسید. ارگونومی سطح بالا و کنترل سطح پایین اغلب در طراحی زبان‌های برنامه‌نویسی در تضاد هستند؛ Rust این تعارض را به چالش می‌کشد. با ترکیب ظرفیت فنی قدرتمند و تجربه توسعه‌دهنده‌ای عالی، Rust به شما این امکان را می‌دهد که جزئیات سطح پایین (مانند مصرف حافظه) را کنترل کنید، بدون دردسرهای مرسومی که معمولاً با چنین کنترلی همراه است.

### Rust برای چه کسانی مناسب است
Rust به دلایل مختلف برای افراد زیادی ایده‌آل است. بیایید به چند گروه مهم نگاهی بیندازیم.

#### تیم‌های توسعه‌دهنده
Rust ابزاری کارآمد برای همکاری در تیم‌های بزرگ توسعه‌دهندگان با سطوح مختلف دانش برنامه‌نویسی سیستمی ثابت کرده است. کدهای سطح پایین مستعد اشکالات ظریفی هستند که در اکثر زبان‌های دیگر تنها با آزمایش‌های گسترده و بازبینی دقیق کد توسط توسعه‌دهندگان باتجربه قابل‌شناسایی‌اند. در Rust، کامپایلر نقش دروازه‌بان را ایفا می‌کند و از کامپایل کدی با این اشکالات پنهان، از جمله اشکالات هم‌روندی، خودداری می‌کند. با همکاری با کامپایلر، تیم می‌تواند وقت خود را صرف منطق برنامه کند، به‌جای اینکه دنبال اشکالات بگردد.

Rust همچنین ابزارهای توسعه مدرن را به دنیای برنامه‌نویسی سیستمی آورده است:
- **Cargo**، مدیر وابستگی‌ها و ابزار ساخت همراه Rust، افزودن، کامپایل و مدیریت وابستگی‌ها را در اکوسیستم Rust آسان و یکپارچه می‌کند.
- ابزار **Rustfmt** سبک کدنویسی یکسانی را بین توسعه‌دهندگان تضمین می‌کند.
- **rust-analyzer** با یکپارچه‌سازی با محیط‌های توسعه یکپارچه (IDE) امکان تکمیل کد و نمایش خطاها به‌صورت درون‌خطی را فراهم می‌کند.
  با استفاده از این ابزارها و سایر ابزارهای اکوسیستم Rust، توسعه‌دهندگان می‌توانند در نوشتن کدهای سطح سیستمی بهره‌ور باشند.

#### دانشجویان
Rust برای دانشجویان و کسانی که به یادگیری مفاهیم سیستمی علاقه‌مندند مناسب است. بسیاری با استفاده از Rust موضوعاتی مانند توسعه سیستم‌عامل را آموخته‌اند. جامعه Rust بسیار welcoming است و با خوشحالی به سؤالات دانشجویان پاسخ می‌دهد. از طریق تلاش‌هایی مانند این کتاب، تیم‌های Rust می‌خواهند مفاهیم سیستمی را برای افراد بیشتری، به‌ویژه تازه‌واردان به برنامه‌نویسی، قابل‌دسترس‌تر کنند.

#### شرکت‌ها
صدها شرکت، چه بزرگ و چه کوچک، از Rust در تولید برای کارهای متنوعی مانند ابزارهای خط فرمان، سرویس‌های وب، ابزارهای DevOps، دستگاه‌های جاسازی شده، تحلیل و کدگذاری صوت و تصویر، ارزهای دیجیتال، زیست‌فناوری، موتورهای جستجو، برنامه‌های اینترنت اشیا، یادگیری ماشین و حتی بخش‌های عمده‌ای از مرورگر وب فایرفاکس استفاده می‌کنند.

#### توسعه‌دهندگان متن‌باز
Rust برای کسانی است که می‌خواهند در ساخت زبان برنامه‌نویسی Rust، جامعه، ابزارهای توسعه و کتابخانه‌ها مشارکت کنند. ما بسیار خوشحال می‌شویم که شما به زبان Rust کمک کنید.

#### افرادی که به سرعت و پایداری اهمیت می‌دهند
Rust برای کسانی است که در یک زبان به دنبال سرعت و پایداری‌اند. منظور از سرعت، هم سرعت اجرای کد Rust و هم سرعتی است که Rust به شما امکان نوشتن برنامه‌ها را می‌دهد. بررسی‌های کامپایلر Rust پایداری را از طریق افزودن ویژگی‌ها و بازسازی کد تضمین می‌کند. این برخلاف کدهای قدیمی و شکننده در زبان‌هایی است که چنین بررسی‌هایی ندارند و توسعه‌دهندگان اغلب از تغییر آن‌ها می‌ترسند. با تلاش برای abstractions بدون هزینه — ویژگی‌های سطح بالا که به کد سطح پایین به همان سرعت کد نوشته‌شده دستی کامپایل می‌شوند — Rust سعی دارد کد ایمن را سریع کند.

زبان Rust امیدوار است کاربران بسیار دیگری را نیز پشتیبانی کند؛ موارد ذکرشده تنها برخی از بزرگ‌ترین ذی‌نفعان هستند. در کل، بزرگ‌ترین جاه‌طلبی Rust حذف مصالحه‌هایی است که برنامه‌نویسان دهه‌ها پذیرفته‌اند، با ارائه ایمنی و بهره‌وری، سرعت و ارگونومی. Rust را امتحان کنید و ببینید آیا انتخاب‌های آن برای شما کار می‌کند یا نه.

### این کتاب برای چه کسانی است
این کتاب فرض می‌کند که شما در زبان برنامه‌نویسی دیگری کد نوشته‌اید، اما هیچ فرضی درباره اینکه کدام زبان نمی‌کند. ما سعی کرده‌ایم مطالب را برای افرادی با پیش‌زمینه‌های برنامه‌نویسی متنوع به‌طور گسترده قابل‌دسترس کنیم. زمان زیادی را صرف صحبت درباره اینکه برنامه‌نویسی چیست یا چگونه باید به آن فکر کرد، نمی‌کنیم. اگر کاملاً با برنامه‌نویسی غریبه‌اید، بهتر است کتابی بخوانید که به‌طور خاص مقدمه‌ای بر برنامه‌نویسی ارائه می‌دهد.

### چگونه از این کتاب استفاده کنیم
به‌طور کلی، این کتاب فرض می‌کند که شما آن را از ابتدا تا انتها به‌ترتیب می‌خوانید. فصل‌های بعدی بر مفاهیم فصل‌های قبلی بنا شده‌اند و فصل‌های اولیه ممکن است جزئیات یک موضوع خاص را عمیق بررسی نکنند، اما در فصل‌های بعدی به آن موضوع بازمی‌گردند.

در این کتاب دو نوع فصل خواهید یافت: فصل‌های مفهومی و فصل‌های پروژه‌ای. در فصل‌های مفهومی، درباره جنبه‌ای از Rust خواهید آموخت. در فصل‌های پروژه‌ای، با هم برنامه‌های کوچکی می‌سازیم و آنچه تاکنون آموخته‌اید را به کار می‌بریم. فصل‌های ۲، ۱۲ و ۲۱ فصل‌های پروژه‌ای هستند؛ بقیه فصل‌های مفهومی‌اند.

فصل ۱ توضیح می‌دهد که چگونه Rust را نصب کنیم، چگونه برنامه «سلام، دنیا!» بنویسیم و چگونه از Cargo، مدیر بسته و ابزار ساخت Rust، استفاده کنیم. فصل ۲ مقدمه‌ای عملی برای نوشتن برنامه در Rust است که در آن یک بازی حدس عدد می‌سازید. در اینجا مفاهیم را در سطح بالا پوشش می‌دهیم و فصل‌های بعدی جزئیات بیشتری ارائه خواهند داد. اگر می‌خواهید فوراً دست به کار شوید، فصل ۲ جای مناسب شماست. فصل ۳ ویژگی‌های Rust را که شبیه به سایر زبان‌های برنامه‌نویسی هستند پوشش می‌دهد و در فصل ۴ درباره سیستم مالکیت (ownership) Rust خواهید آموخت. اگر یادگیرنده‌ای دقیق هستید که ترجیح می‌دهد هر جزئیاتی را قبل از رفتن به مرحله بعد یاد بگیرد، ممکن است بخواهید فصل ۲ را رد کنید و مستقیم به فصل ۳ بروید، و زمانی که بخواهید روی پروژه‌ای کار کنید که جزئیات آموخته‌شده را به کار می‌برد، به فصل ۲ بازگردید.

فصل ۵ درباره structها و متدها بحث می‌کند و فصل ۶ به enumها، عبارات match و ساختار کنترلی if let می‌پردازد. از structها و enumها برای ساخت نوع‌های سفارشی در Rust استفاده خواهید کرد.

در فصل ۷، درباره سیستم ماژول Rust و قوانین حریم خصوصی برای سازمان‌دهی کد و رابط برنامه‌نویسی کاربردی (API) عمومی آن خواهید آموخت. فصل ۸ برخی از ساختارهای داده‌ای مجموعه‌ای رایج را که کتابخانه استاندارد فراهم می‌کند، مانند بردارها (vectors)، رشته‌ها (strings) و نقشه‌های درهم‌سازی (hash maps)، بررسی می‌کند. فصل ۹ فلسفه و تکنیک‌های مدیریت خطا در Rust را کاوش می‌کند.

فصل ۱۰ به genericها، traitها و طول‌عمرها (lifetimes) می‌پردازد که به شما قدرت تعریف کدی را می‌دهند که برای چندین نوع اعمال می‌شود. فصل ۱۱ کاملاً درباره تست‌نویسی است که حتی با تضمین‌های ایمنی Rust برای اطمینان از صحت منطق برنامه ضروری است. در فصل ۱۲، ما پیاده‌سازی خودمان از زیرمجموعه‌ای از قابلیت‌های ابزار خط فرمان grep را که برای جستجوی متن در فایل‌ها استفاده می‌شود، خواهیم ساخت. برای این کار، از بسیاری از مفاهیم بحث‌شده در فصل‌های قبلی استفاده می‌کنیم.

فصل ۱۳ به closureها و iteratorها می‌پردازد: ویژگی‌هایی از Rust که از زبان‌های برنامه‌نویسی تابعی می‌آیند. در فصل ۱۴، Cargo را عمیق‌تر بررسی می‌کنیم و درباره بهترین روش‌ها برای به اشتراک گذاشتن کتابخانه‌هایتان با دیگران صحبت می‌کنیم. فصل ۱۵ به اشاره‌گرهای هوشمند (smart pointers) که کتابخانه استاندارد ارائه می‌دهد و traitهایی که قابلیت‌های آن‌ها را فعال می‌کنند، می‌پردازد.

در فصل ۱۶، مدل‌های مختلف برنامه‌نویسی هم‌روند را بررسی می‌کنیم و درباره اینکه چگونه Rust به شما کمک می‌کند بی‌باک در چندین رسیمان (thread) برنامه‌نویسی کنید، صحبت می‌کنیم. در فصل ۱۷، با بررسی نحو async و await در Rust، همراه با taskها، futureها و streamها، و مدل هم‌روندی سبک‌وزنی که آن‌ها فعال می‌کنند، این موضوع را گسترش می‌دهیم.

فصل ۱۸ به این می‌پردازد که اصطلاحات Rust چگونه با اصول برنامه‌نویسی شیءگرا که ممکن است با آن‌ها آشنا باشید، مقایسه می‌شوند. فصل ۱۹ مرجعی درباره الگوها و تطبیق الگو (pattern matching) است، که روش‌های قدرتمندی برای بیان ایده‌ها در سراسر برنامه‌های Rust هستند. فصل ۲۰ مجموعه‌ای از موضوعات پیشرفته جذاب را شامل می‌شود، از جمله Rust ناایمن (unsafe Rust)، ماکروها و اطلاعات بیشتر درباره طول‌عمرها، traitها، نوع‌ها، توابع و closureها.

در فصل ۲۱، پروژه‌ای را تکمیل می‌کنیم که در آن یک سرور وب چند رسیمانی سطح پایین پیاده‌سازی خواهیم کرد!

در نهایت، برخی پیوست‌ها اطلاعات مفیدی درباره زبان را به‌صورت مرجع‌مانند ارائه می‌دهند. پیوست A کلیدواژه‌های Rust را پوشش می‌دهد، پیوست B عملگرها و نمادهای Rust را، پیوست C traitهای قابل‌استنتاج ارائه‌شده توسط کتابخانه استاندارد را، پیوست D برخی ابزارهای توسعه مفید را، و پیوست E ویرایش‌های Rust را توضیح می‌دهد. در پیوست F، می‌توانید ترجمه‌های این کتاب را پیدا کنید، و در پیوست G درباره نحوه ساخت Rust و Rust شبانه (nightly Rust) توضیح خواهیم داد.

هیچ راه اشتباهی برای خواندن این کتاب وجود ندارد: اگر می‌خواهید جلوتر بروید، ادامه دهید! اگر با سردرگمی مواجه شدید، ممکن است لازم باشد به فصل‌های قبلی بازگردید. اما هر روشی که برای شما کار می‌کند را دنبال کنید.

بخش مهمی از فرآیند یادگیری Rust، یادگیری نحوه خواندن پیام‌های خطایی است که کامپایلر نمایش می‌دهد: این پیام‌ها شما را به سمت کد کارآمد هدایت می‌کنند. به همین دلیل، ما مثال‌های زیادی ارائه می‌دهیم که کامپایل نمی‌شوند، همراه با پیام خطایی که کامپایلر در هر موقعیت نشان می‌دهد. بدانید که اگر یک مثال را به‌صورت تصادفی وارد کنید و اجرا کنید، ممکن است کامپایل نشود! مطمئن شوید که متن اطراف را می‌خوانید تا ببینید آیا مثالی که می‌خواهید اجرا کنید قرار است خطا بدهد یا نه. Ferris نیز به شما کمک می‌کند تا کدهایی که قرار نیست کار کنند را تشخیص دهید:

| Ferris                                               | معنی |
|------------------------------------------------------|------|
| <img src="img/does_not_compile.svg"> با علامت سؤال   | این کد کامپایل نمی‌شود! |
| <img src="img/panics.svg"> با دست‌های بالا           | این کد panic می‌کند! |
| <img src="img/not_desired_behavior.svg"> با یک چنگال بالا، شانه بالا انداختن | این کد رفتار موردنظر را تولید نمی‌کند. |

در اکثر موقعیت‌ها، ما شما را به نسخه صحیح هر کدی که کامپایل نمی‌شود هدایت می‌کنیم.
