## سلام، دنیا!

اکنون که Rust را نصب کرده‌اید، وقت آن است که اولین برنامه Rust خود را بنویسید. رسم است که هنگام یادگیری یک زبان جدید، برنامه کوچکی بنویسید که متن `Hello, world!` را روی صفحه نمایش چاپ کند، پس ما هم همین کار را می‌کنیم!

> **توجه:** این کتاب فرض می‌کند که شما با خط فرمان آشنایی ابتدایی دارید. Rust هیچ الزام خاصی درباره ابزارهای ویرایش یا محل ذخیره کد شما ندارد، بنابراین اگر ترجیح می‌دهید به‌جای خط فرمان از یک محیط توسعه یکپارچه (IDE) استفاده کنید، می‌توانید از IDE مورد علاقه‌تان استفاده کنید. بسیاری از IDEها اکنون تا حدی از Rust پشتیبانی می‌کنند؛ برای جزئیات، مستندات IDE را بررسی کنید. تیم Rust روی پشتیبانی عالی از IDE از طریق `rust-analyzer` تمرکز کرده است. برای اطلاعات بیشتر، به پیوست D مراجعه کنید.

### ایجاد پوشه پروژه
ابتدا یک پوشه برای ذخیره کدهای Rust خود ایجاد می‌کنید. برای Rust مهم نیست کد شما کجا ذخیره شود، اما برای تمرین‌ها و پروژه‌های این کتاب، پیشنهاد می‌کنیم یک پوشه `projects` در پوشه خانگی خود بسازید و همه پروژه‌هایتان را آنجا نگه دارید.

ترمینال را باز کنید و دستورات زیر را برای ایجاد پوشه `projects` و پوشه‌ای برای پروژه «Hello, world!» در داخل آن وارد کنید.

برای لینوکس، مک‌او‌اس و PowerShell در ویندوز، این را وارد کنید:

```bash
$ mkdir ~/projects
$ cd ~/projects
$ mkdir hello_world
$ cd hello_world
```

برای CMD در ویندوز، این را وارد کنید:

```cmd
> mkdir "%USERPROFILE%\projects"
> cd /d "%USERPROFILE%\projects"
> mkdir hello_world
> cd hello_world
```

### نوشتن و اجرای برنامه Rust
حالا یک فایل منبع جدید بسازید و آن را `main.rs` بنامید. فایل‌های Rust همیشه با پسوند `.rs` پایان می‌یابند. اگر نام فایل شما بیش از یک کلمه دارد، طبق رسم از زیرخط (underscore) برای جداکردن کلمات استفاده کنید. برای مثال، از `hello_world.rs` به‌جای `helloworld.rs` استفاده کنید.

اکنون فایل `main.rs` را که ایجاد کردید باز کنید و کد زیر را در آن وارد کنید:

**نام فایل:** `main.rs`

```rust
fn main() {
    println!("Hello, world!");
}
```

**لیست ۱-۱:** برنامه‌ای که `Hello, world!` را چاپ می‌کند

فایل را ذخیره کنید و به پنجره ترمینال خود در پوشه `~/projects/hello_world` برگردید. در لینوکس یا مک‌او‌اس، دستورات زیر را برای کامپایل و اجرای فایل وارد کنید:

```bash
$ rustc main.rs
$ ./main
Hello, world!
```

در ویندوز، به‌جای `./main` از دستور زیر استفاده کنید:

```cmd
> rustc main.rs
> .\main.exe
Hello, world!
```

صرف‌نظر از سیستم‌عامل، رشته `Hello, world!` باید در ترمینال چاپ شود. اگر این خروجی را نمی‌بینید، به بخش «عیب‌یابی» در قسمت نصب مراجعه کنید تا راه‌های دریافت کمک را بیابید.

اگر `Hello, world!` چاپ شد، تبریک می‌گویم! شما رسماً یک برنامه Rust نوشته‌اید. این شما را به یک برنامه‌نویس Rust تبدیل می‌کند—خوش آمدید!

### آناتومی یک برنامه Rust
بیایید برنامه «Hello, world!» را با جزئیات بررسی کنیم. این اولین قطعه از پازل است:

```rust
fn main() {

}
```

این خطوط یک تابع به نام `main` تعریف می‌کنند. تابع `main` خاص است: همیشه اولین کدی است که در هر برنامه اجرایی Rust اجرا می‌شود. در اینجا، خط اول تابعی به نام `main` را اعلان می‌کند که هیچ پارامتری ندارد و چیزی برنمی‌گرداند. اگر پارامترهایی وجود داشت، داخل پرانتزها `()` قرار می‌گرفتند.

بدنه تابع در `{}` قرار دارد. Rust برای همه بدنه‌های تابع نیاز به کروشه دارد. سبک خوبی است که کروشه باز را در همان خط اعلان تابع قرار دهید و بین آن‌ها یک فاصله بگذارید.

> **توجه:** اگر می‌خواهید در پروژه‌های Rust به یک سبک استاندارد پایبند باشید، می‌توانید از ابزار قالب‌بندی خودکار به نام `rustfmt` برای قالب‌بندی کد خود به سبک خاصی استفاده کنید (جزئیات بیشتر درباره `rustfmt` در پیوست D). تیم Rust این ابزار را همراه با توزیع استاندارد Rust، مانند `rustc`، گنجانده است، بنابراین باید از قبل روی کامپیوتر شما نصب شده باشد!

**توضیح اضافی:** ابزار `rustfmt` به شما کمک می‌کند کدتان را طبق استانداردهای جامعه Rust قالب‌بندی کنید، که خوانایی و یکپارچگی را در پروژه‌های تیمی بهبود می‌بخشد.

بدنه تابع `main` شامل کد زیر است:

```rust
println!("Hello, world!");
```

این خط تمام کار این برنامه کوچک را انجام می‌دهد: متنی را روی صفحه چاپ می‌کند. سه نکته مهم در اینجا وجود دارد:

اول، `println!` یک ماکروی Rust را فراخوانی می‌کند. اگر به‌جای آن یک تابع را فراخوانی می‌کرد، به‌صورت `println` (بدون `!`) نوشته می‌شد. ما در فصل ۲۰ ماکروهای Rust را با جزئیات بیشتری بحث خواهیم کرد. فعلاً فقط باید بدانید که استفاده از `!` به این معناست که شما یک ماکرو را به‌جای یک تابع معمولی فراخوانی می‌کنید و ماکروها همیشه از قوانین یکسانی مانند توابع پیروی نمی‌کنند.

دوم، رشته `"Hello, world!"` را می‌بینید. ما این رشته را به‌عنوان آرگومان به `println!` پاس می‌دهیم و این رشته روی صفحه چاپ می‌شود.

سوم، خط را با یک سمی‌کالن (`;`) پایان می‌دهیم، که نشان می‌دهد این عبارت تمام شده و عبارت بعدی آماده شروع است. اکثر خطوط کد Rust با سمی‌کالن پایان می‌یابند.

### کامپایل و اجرا مراحل جداگانه‌ای هستند
شما به‌تازگی یک برنامه تازه ایجادشده را اجرا کردید، پس بیایید هر مرحله از این فرآیند را بررسی کنیم.

قبل از اجرای یک برنامه Rust، باید آن را با استفاده از کامپایلر Rust کامپایل کنید. این کار با واردکردن دستور `rustc` و پاس‌دادن نام فایل منبع انجام می‌شود، مانند این:

```bash
$ rustc main.rs
```

اگر با C یا C++ آشنا باشید، متوجه خواهید شد که این شبیه به `gcc` یا `clang` است. پس از کامپایل موفق، Rust یک فایل اجرایی باینری تولید می‌کند.

در لینوکس، مک‌او‌اس و PowerShell در ویندوز، می‌توانید فایل اجرایی را با واردکردن دستور `ls` در شل خود ببینید:

```bash
$ ls
main  main.rs
```

در لینوکس و مک‌او‌اس، دو فایل خواهید دید. با PowerShell در ویندوز، همان سه فایلی را می‌بینید که با CMD می‌دیدید. با CMD در ویندوز، دستور زیر را وارد کنید:

```cmd
> dir /B %= گزینه /B فقط نام فایل‌ها را نشان می‌دهد =%
main.exe
main.pdb
main.rs
```

**توضیح کامنت:** گزینه `/B` در دستور `dir` باعث می‌شود فقط نام فایل‌ها نمایش داده شود، بدون اطلاعات اضافی مانند تاریخ یا اندازه فایل.

این نشان می‌دهد فایل کد منبع با پسوند `.rs`، فایل اجرایی (`main.exe` در ویندوز، اما `main` در سایر پلتفرم‌ها)، و در ویندوز، فایلی حاوی اطلاعات دیباگ با پسوند `.pdb` وجود دارد. از اینجا، فایل `main` یا `main.exe` را اجرا می‌کنید، مانند این:

```bash
$ ./main # یا .\main.exe در ویندوز
```

اگر فایل `main.rs` شما برنامه «Hello, world!» باشد، این خط `Hello, world!` را در ترمینال شما چاپ می‌کند.

اگر با زبان‌های پویا مانند Ruby، Python یا JavaScript آشناتر هستید، ممکن است به جداکردن مراحل کامپایل و اجرا عادت نداشته باشید. Rust یک زبان کامپایل‌شده پیش از اجرا (ahead-of-time compiled) است، به این معنی که می‌توانید یک برنامه را کامپایل کنید و فایل اجرایی را به شخص دیگری بدهید، و آن‌ها می‌توانند آن را حتی بدون نصب Rust اجرا کنند. اگر به کسی یک فایل `.rb`، `.py` یا `.js` بدهید، آن‌ها باید پیاده‌سازی Ruby، Python یا JavaScript (به‌ترتیب) را نصب کرده باشند. اما در این زبان‌ها، شما فقط به یک دستور برای کامپایل و اجرای برنامه نیاز دارید. همه‌چیز در طراحی زبان یک مصالحه است.

کامپایل با `rustc` برای برنامه‌های ساده خوب است، اما با بزرگ‌تر شدن پروژه‌تان، می‌خواهید همه گزینه‌ها را مدیریت کنید و به اشتراک گذاشتن کدتان را آسان کنید. در ادامه، شما را با ابزار Cargo آشنا می‌کنیم، که به شما کمک می‌کند برنامه‌های واقعی Rust بنویسید.

